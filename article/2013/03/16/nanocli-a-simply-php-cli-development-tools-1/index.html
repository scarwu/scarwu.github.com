<!doctype html>
<html lang="zh-tw">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>NanoCLI - PHP CLI開發工具 (1) | ScarShow | 刀疤說</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- Load Cascading Style Sheets -->
	<link rel="stylesheet" href="/theme/main.css">
</head>
<body>
	<header>
		<h1><a href="/">ScarShow</a></h1>
		<hr />
		<h2>I know that I don't know</h2>
	</header>
	<nav>
		<span class="left">
			<a href="/about">About</a>
			<a href="/works">Works</a>
			<a href="/Diablo3Calculator" target="_blank">D3 Calculator</a>
		</span>
		<span class="home">
			<a href="/">Home</a>
			<span class="arrow"></span>
		</span>
		<span class="right">
			<a href="/archive">Archive</a>
			<a href="/category">Category</a>
			<a href="/tag">Tag</a>
		</span>
	</nav>
	<div id="main">
		<div id="container"><div id="article">
	<article>
		<h1 class="title">NanoCLI - PHP CLI開發工具 (1)</h1>
		<div class="info">
			<span class="date">2013-03-16</span>
			<br />
			<span class="comments"><a href="/article/2013/03/16/nanocli-a-simply-php-cli-development-tools-1/#disqus_thread">0 Comments</a></span>
		</div>
		<div class="content"><p>關於NanoCLI這個工具原本想都沒有想過要去製作它，它是伴隨著Pointless一起誕生出來的，除了NanoCLI之外還有一個CSS Compressor這個小工具但這邊先不說。</p>

<p>約一年前，那時候為了想要讓Pointless看起來像是使用內建指令那樣去操作，所以就另外製作了NanoCLI讓Pointless能順利實作各種CLI的指令，到現在NanoCLI只有少少的3個檔案而且總程式不超過250行，使用上也很簡單。</p>

<h2>系統要求</h2>

<p>PHP 5.3+</p>

<h2>功能</h2>

<ul>
<li>指令呼叫 (ex. <code>$ ./cli.php command</code>)</li>
<li>指令選項 (ex. <code>$ ./cli.php command -v -al</code>)</li>
<li>指令配置 (ex. <code>$ ./cli.php command --prefix=/usr/local/bin</code>)</li>
<li>文字色彩</li>
<li>文字界面讀寫</li>
<li>Namespace 以及 Autoload</li>
</ul>

<!--more-->

<h2>使用</h2>

<h3>下載原始碼</h3>

<pre><code>git clone git://github.com/scarwu/NanoCLI.git
</code></pre>

<h3>檔案配置</h3>

<pre><code>.
├── boot.php
├── Command
│   ├── Test
│   │   ├── Help.php
│   │   └── Read.php
│   └── Test.php
└── NanoCLI
    ├── Command.php
    ├── IO.php
    └── Loader.php
</code></pre>

<h3>設定Boot</h3>

<p>做為一個CLI應用程式首先要設定程式的進入點。</p>

<pre><code>&lt;?php
/* Boot.php */

// 載入 Loader
require realpath(__DIR__ . '/../src/NanoCLI/Loader.php');

use NanoCLI\Loader;

// 設定程式目錄以及Namespace
// 先設定NanoCLI的位置
Loader::register('NanoCLI', realpath(__DIR__ . '/../src'));
// 再設定相關指令的位置
Loader::register('Test', realpath(__DIR__ . '/Command'));

// 註冊autoload function
spl_autoload_register('NanoCLI\Loader::load');

// 初始化指令
$test = new Test();
$test-&gt;Init();
</code></pre>

<h3>實作指令 Test.php</h3>

<p>上面的程式碼最後初始化了Test這個Class，再初始化之後NanoCLI會自動呼叫對應指令，所以在這邊我們顯來實作第一個指令。</p>

<pre><code>&lt;?php
use NanoCLI\IO;

// 繼承 NanoCLI\Command
class Test extends NanoCLI\Command {

    public function __construct() {
        // 呼叫Parent Construct
        parent::__construct();
    }

    public function run() {
        // 讀取鍵盤輸入
        IO::write('Enter your name: ');
        $name = IO::read();

        // 輸出結果
        IO::writeln('Hi, ' . $name, 'green');
    }
}
</code></pre>

<p><br />每個指令都要繼承NanoCLI\Command，然後記得要叫Parent Construct，這樣程式才會動，所以現在可以執行第一個程式了，應該會有以下的結果。</p>

<pre><code>$ php boot.php
$ Enter your name: Scar
$ Hi, Scar
</code></pre>

<p><br />雖然在呼叫的時候沒有帶入任何參數但它也是一個指令，它就像是一般程式的main一樣的作用，所以可以將上面範例程式的 <code>run()</code> 改成自動呼叫help指令以防止使用者不知道要如何去使用你的程式。</p>

<pre><code>&lt;?php
use NanoCLI\IO;

// 繼承 NanoCLI\Command
class Test extends NanoCLI\Command {

    public function __construct() {
        // 呼叫Parent Construct
        parent::__construct();
    }

    public function run() {
        // 呼叫Help指令
        $help = new Test\Help();
        $help-&gt;run();
    }
}
</code></pre>

<p><strong>待續</strong></p>
</div>
	</article>
		<!-- DISQUS -->
	<div id="disqus_thread"></div>
	<script type="text/javascript">
		var disqus_shortname = 'scarshow';
		(function() {
			var embed = document.createElement('script');
			embed.type = 'text/javascript';
			embed.async = true;
			embed.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(embed);

			var count = document.createElement('script');
			count.async = true;
			count.type = 'text/javascript';
			count.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(count);
		}());
	</script>
		<div class="bar">
		<span class="new">
			<a href="/article/2013/03/16/nanocli-a-simply-php-cli-development-tools-2"><< NanoCLI - PHP CLI開發工具 (2)</a>		</span>
		<span class="old">
			<a href="/article/2013/01/09/php-phar-create-and-use">Phar建立與使用 >></a>		</span>
		<span class="count">2 / 19</span>
	</div>
</div></div>
		<div id="side">
			<form class="search" action="http://www.google.com/search?q=as" target="_blank" method="get">
				<input type="hidden" name="q" value="site:scar.simcz.tw" />
				<input type="text" name="q" placeholder="Search" />
				<input type="submit" />
			</form>
			<div class="about">
	<div class="title"><a href="/about">About</a></div>
	<div class="content">
		<img class="avatar" src="http://avatars.plurk.com/3891981-big26.jpg" />
		<p class="name">刀疤</p>
		<p class="says">別人都覺得我多才多藝，但其實我只是略懂略懂。</p>
		<div class="social_icon">	
			<a href="https://github.com/ScarWu" target="_blank">
				<img src="/images/about/github.png" />
			</a>
			<a href="https://plus.google.com/108940352426915109637/posts" target="_blank">
				<img src="/images/about/google_plus.png" />
			</a>
			<a href="http://www.plurk.com/ScarWu" target="_blank">
				<img src="/images/about/plurk.png" />
			</a>
		</div>
	</div>
</div><div class="archive">
	<div class="title"><a href="/archive">Archive</a></div>
	<div class="content">
				<span class="item"><a href="/archive/2013">2013(3)</a></span>
				<span class="item"><a href="/archive/2012">2012(14)</a></span>
				<span class="item"><a href="/archive/2011">2011(2)</a></span>
			</div>
</div><div class="category">
	<div class="title"><a href="/category">Category</a></div>
	<div class="content">
				<span class="item"><a href="/category/IT">IT(18)</a></span>
				<span class="item"><a href="/category/Game">Game(1)</a></span>
			</div>
</div><div class="tag">
	<div class="title"><a href="/tag">Tag</a></div>
	<div class="content">
				<span class="item"><a href="/tag/PHP">PHP(12)</a></span>
				<span class="item"><a href="/tag/Note">Note(9)</a></span>
				<span class="item"><a href="/tag/Javascript">Javascript(3)</a></span>
				<span class="item"><a href="/tag/Works">Works(2)</a></span>
				<span class="item"><a href="/tag/Python">Python(2)</a></span>
				<span class="item"><a href="/tag/Android">Android(2)</a></span>
				<span class="item"><a href="/tag/Tools">Tools(2)</a></span>
				<span class="item"><a href="/tag/Pointless">Pointless(2)</a></span>
				<span class="item"><a href="/tag/NanoCLI">NanoCLI(2)</a></span>
				<span class="item"><a href="/tag/Facebook">Facebook(2)</a></span>
				<span class="item"><a href="/tag/Mobile Web">Mobile Web(1)</a></span>
				<span class="item"><a href="/tag/C/C++">C/C++(1)</a></span>
				<span class="item"><a href="/tag/Linux">Linux(1)</a></span>
				<span class="item"><a href="/tag/Ubuntu">Ubuntu(1)</a></span>
				<span class="item"><a href="/tag/iOS">iOS(1)</a></span>
				<span class="item"><a href="/tag/JavaScript">JavaScript(1)</a></span>
				<span class="item"><a href="/tag/SQLite">SQLite(1)</a></span>
				<span class="item"><a href="/tag/Chrome">Chrome(1)</a></span>
				<span class="item"><a href="/tag/Diablo III">Diablo III(1)</a></span>
				<span class="item"><a href="/tag/HTML5">HTML5(1)</a></span>
				<span class="item"><a href="/tag/Virus">Virus(1)</a></span>
				<span class="item"><a href="/tag/Windows">Windows(1)</a></span>
			</div>
</div>		</div>
	</div>
	<footer>
		<span>Copyright (c) 2011-2013 ScarShow</span>
		<p>Powered by Pointless</p>
	</footer>

	<!-- Define and Load Javascript -->
	<script src="/theme/main.js"></script>
		<script>
		var _gaq = [['_setAccount', 'UA-30675094-1'], ['_trackPageview']]; (function(d, t) {
			var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
			g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
			s.parentNode.insertBefore(g, s)
		} (document, 'script'));
	</script>
	</body>
</html>