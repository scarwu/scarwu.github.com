<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
	<title><![CDATA[ScarShow | 刀疤說]]></title>
	<subtitle></subtitle>
	<link href="http://scar.tw/atom.xml" rel="self" />
	<link href="http://scar.tw/" />
	<id>urn:uuid:4d418d05-9f8f-0741-8939-1476077aab63</id>
	<updated>2018-04-14T12:52:40+08:00</updated>
	<author>
		<name><![CDATA[ScarWu]]></name>
		<uri>http://scar.tw/</uri>
	</author>
	<entry>
		<title type="html"><![CDATA[2017 年末近況]]></title>
		<link href="http://scar.tw/article/2017/11/26/about-late-of-2017/" />
		<id>urn:uuid:7b190959-4598-181d-9983-420bd0923c6c</id>
		<updated>2017-11-26T02:51:07+08:00</updated>
		<summary type="html"><![CDATA[<p>都要年末了，今年的發文也只有年初的一篇文章而已，自從出工作後發文就銳減了，明明很想說點什麼，但卻又沒發文章的動力。</p>
<p>所以只好把最近一些想說的濃縮在這一篇裡。</p>
<!--more-->
<h2>重型機車</h2>
<p>是的，今年是使用重型機車通勤的第三年。在這之前也騎了 <code>125cc</code> 總共六年的時間，自從出了一場小車禍後就在想有什麼更安全卻又一樣方便的通勤方式，我想我得出了一般台灣人難以接受的答案－重型機車。</p>
<p>在台灣扭曲且奇葩的法規之下，這的確是個答案，能夠行駛內側車道且能夠正常左轉，另外在動力與制動力的性能上相較 <code>125cc</code> 好上許多。另外在新竹這種風大的地方將近兩百公斤的車重能夠對於騎乘的安定度帶來大幅的提昇。</p>
<p>你問，為什麼不是買台車開？如果你的問題且唯一答案是這個，那可能要檢視一下自己的觀念及想法是否過於陳舊及僵固。說穿了不管是小客車或是重型機車終究只是交通工具，根據自身的情況選擇合適的交通工具這是一個值得思考的問題。</p>
<p>最重要的是台灣的交通真的太糟糕了，真的必須重構。</p>
<h2>攝影相關</h2>
<p>前陣子從我爸那邊接收了一台 <code>Pentax MX</code> 底片機並附上鏡頭 <code>SMC Pentax-M 50mm F1.4</code>，目前機身正在維修中就快要修好了就缺幾樣材料而已，那鏡頭的話就是已經送洗回來了，不過中間的膠合鏡片變質嚴重霧化，我想應該找個時間自己處理一下。</p>
<p>其實在高中以來就一直有在摸 <code>DSLR</code>，但並不是說非常的專業，因為都是隨拍居多另外沒錢所以人生中第一台購買的相機是 <code>Ricoh Caplio R7</code> 一台隨身數位相機。這次終於買下了 <code>Sony A7 II</code> 這台微型單眼，因為摸過了多台 <code>DSLR</code> 所以我知道那個體積跟重量是我無法接受的，少了反射鏡機構就獲得了重量上的減輕以及超短的鏡後距離，能夠輕易轉接其它接口的鏡頭，例如上面提到的 <code>SMC Pentax-M 50mm F1.4</code>。</p>
<p>但轉接一般來說還是有缺點，通常都是電子轉接環的支援度不足或是轉接環完全沒有電子接點無法提供機身鏡頭資訊且只能手動對焦，但這影響不大，純手動鏡對我來說具有相當的樂趣。所以在之後鏡頭的選擇上則是原生鏡頭以及轉接手動鏡這兩個選項，中間那個半殘的電子轉接環就直接捨去。</p>
<p>另外，如果有機會的話應該會再把 <code>Ricoh Caplio R7</code> 換成 <code>Ricoh GR II</code>，有台輕便且強大的隨身機跟單眼搭配當然是最好。</p>
<h2>Pointless 專案</h2>
<p>說實在的已經很久沒有在繼續開發了，不過這幾年間還是有改版一次，最近有個新想法，想把原本做在　<code>InkDrop</code> 這個難產專案裡面的 <code>GUI</code> 直接整合在 <code>Pointless</code> 裡。因為在這幾年自己的使用下來，在 <code>Command Line</code> 的模式下還是有一點彆扭，在多數情況下如果有個網頁介面也方便許多。</p>
<p>在這幾年間靜態部落格專案真的非常多，我還是繼續作為一個興趣開發，雖然不是使用很新潮的語言為基底，但目標還是簡單易用，重點還是自己有寫文章的需求。</p>
<h2>網誌</h2>
<p>前陣子，仔細算了一下應該有三十幾篇文章沒有寫，這個數字快要是我的落格發文的一半以上。當然要把想法寫出來很難，要能夠條理把想法寫出來更難。</p>
<p>我也不是很希望自己的文章過於簡短，因為那樣跟寫微網誌沒差多少，也更不希望靠著許多篇簡短的文章來衝流量。既然都是部落格了當然文章本身不能太隨便。</p>
<p>希望惰性不會主宰一切。</p>]]></summary>
	</entry>
	<entry>
		<title type="html"><![CDATA[PHP 7 PREG_JIT_STACKLIMIT_ERROR]]></title>
		<link href="http://scar.tw/article/2017/01/14/php-7-preg-jit-stacklimit-error/" />
		<id>urn:uuid:0cd2e795-93c9-0818-1787-449576b4c22d</id>
		<updated>2017-01-14T23:10:46+08:00</updated>
		<summary type="html"><![CDATA[<p>最近在重構學生時代的作品 <code>Pointless</code> 讓它符合現代的技術，順便熟悉一下 <code>PHP7</code>新的功能。</p>
<p>在 <code>Pointless</code> 中因為使用純文字的 <code>markdown</code> 格式來儲存文章所以有大量的機會會使用到 <code>preg_*</code> 相關的函式。</p>
<p>在 <code>PHP7</code> 其中的一個改變就是在 <code>PCRE</code> 中加入了 <code>JIT</code> 功能，可以用來優化正規表示式的效能，但是礙於 stack 的容量有限所以在處理長度較長的字串的時候，很容易就超過預設的 <code>32K</code> 的限制產生出 <code>PREG_JIT_STACKLIMIT_ERROR</code>。</p>
<!--more-->
<h2>Solutions</h2>
<p>當然解法可以直接將 <code>JIT</code> 關閉，當然這不建議。</p>
<pre><code>ini_set('pcre.jit', false);</code></pre>
<p>另外一個解法則是去優化正規表示式，當然我採取直接關閉 <code>JIT</code> 的作法，當然這個作法並不好，但目前我應該不會去動表示式的部份，所以要立刻讓 <code>Pointless</code> 能在 <code>PHP7</code> 上正常運作就先這樣處裡。</p>
<p>詳細的建議可以去看看 <code>Stackoverflow</code> 上的解說連結在下面的 <code>Reference</code> 中。</p>
<h2>Reference</h2>
<p><a href="http://stackoverflow.com/questions/39685883/php-preg-jit-stacklimit-error-inefficient-regex">PHP PREG_JIT_STACKLIMIT_ERROR - inefficient regex</a></p>]]></summary>
	</entry>
	<entry>
		<title type="html"><![CDATA[MariaDB Galera Cluster 10.1 Setting]]></title>
		<link href="http://scar.tw/article/2016/12/02/mariadb-galera-cluster-10-1-setting/" />
		<id>urn:uuid:78046c09-e98e-0603-684a-d0a1a17dcc43</id>
		<updated>2016-12-02T12:02:07+08:00</updated>
		<summary type="html"><![CDATA[<p>先前已經寫過 <code>10.0</code> 的設定方式，MariaDB 升級成 <code>10.1</code> 後 <code>galera</code> 就已經內建在其中了，也不用額外安裝它的套件。</p>
<h2>Environment</h2>
<h3>Debian Jessie</h3>
<pre><code># MariaDB
sudo apt-get install python-software-properties
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db
sudo add-apt-repository 'deb http://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.0/debian jessie main'

# Percona XtraBackup
wget https://repo.percona.com/apt/percona-release_0.1-3.jessie_all.deb
sudo dpkg -i percona-release_0.1-3.jessie_all.deb
sudo apt-key adv --keyserver keys.gnupg.net --recv-keys 8507EFA5</code></pre>
<!--more-->
<h2>Install MariaDB &amp; XtraBackup</h2>
<p>這邊額外安裝 <code>XtraBackup</code> 是讓 <code>wsrep_sst_method</code> 參數可以使用 <code>xtrabackup-v2</code> 來同步 (一般是使用 <code>rsync</code>)，好處是不會鎖表</p>
<pre><code>sudo apt-get update
sudo apt-get install -y mariadb-server percona-xtrabackup</code></pre>
<h2>Upgrade MariaDB form 10.0 to 10.1 (Optional)</h2>
<p>如果你的 <code>MariaDB</code> 還是 <code>10.0</code> 版，你可以升級它，除了安裝套件之外還要使用 <code>mysql_upgrade</code> 將原有的資料庫升級</p>
<pre><code>sudo apt-get update
sudo apt-get remove -y mariadb-galera-server
sduo apt-get install mariadb-server

# Upgrade old table
sudo mysql_upgrade -u root -p</code></pre>
<h2>Setting Cluster</h2>
<h3>Add Cluster User</h3>
<p>以下參數請自行帶入</p>
<ul>
<li><code>CLUSTER_USER</code></li>
<li><code>CLUSTER_PASS</code></li>
</ul>
<pre><code>GRANT USAGE ON *.* to CLUSTER_USER@'%' IDENTIFIED BY 'CLUSTER_PASS';
GRANT ALL PRIVILEGES on *.* to CLUSTER_USER@'%';</code></pre>
<h3>Modify /etc/mysql/conf.d/galera.cnf</h3>
<p>以下參數請自行帶入</p>
<ul>
<li><code>CLUSTER_NAME</code></li>
<li><code>OTHER_NODE_IP</code></li>
<li><code>NODE_IP</code></li>
<li><code>NODE_NAME</code></li>
<li><code>CLUSTER_USER</code></li>
<li><code>CLUSTER_PASS</code></li>
</ul>
<pre><code>[galera]
# Mandatory settings
wsrep_on                    = ON
wsrep_provider              = /usr/lib/galera/libgalera_smm.so
wsrep_provider_options      = "gcache.size=2G"
wsrep_cluster_name          = "CLUSTER_NAME"
wsrep_cluster_address       = "gcomm://OTHER_NODE_IP:4567?pc.wait_prim=no"
wsrep_node_address          = "NODE_IP"
wsrep_node_name             = NODE_NAME
wsrep_sst_auth              = CLUSTER_USER:CLUSTER_PASS
wsrep_sst_method            = xtrabackup-v2

bind-address                = 0.0.0.0
binlog_format               = ROW
query_cache_size            = 0
query_cache_type            = 0
default_storage_engine      = InnoDB

innodb_autoinc_lock_mode    = 2
innodb_log_file_size        = 48M
innodb_data_file_path       = ibdata1:12M:autoextend
innodb_buffer_pool_size     = 400M</code></pre>
<h3>Firewall allow ports</h3>
<ul>
<li>3306: MariaDB</li>
<li>4444: SST (RSync, XtraBackup)</li>
<li>4567: Galera Cluster</li>
<li>4568: IST</li>
</ul>
<h2>Start Cluster Node</h2>
<h3>Master Node</h3>
<pre><code>sudo service mysql bootstrap</code></pre>
<h3>Slave Node</h3>
<pre><code>sudo service msyql start</code></pre>
<h2>Troubleshooting</h2>
<ul>
<li><a href="https://www.percona.com/blog/2014/12/30/diagnosing-sst-errors-with-percona-xtradb-cluster-for-mysql/">Diagnosing SST errors with Percona XtraDB Cluster for MySQL</a></li>
<li><a href="http://galeracluster.com/documentation-webpages/mysqlwsrepoptions.html">MYSQL WSREP OPTIONS</a></li>
</ul>]]></summary>
	</entry>
	<entry>
		<title type="html"><![CDATA[NFS v4 簡易安裝]]></title>
		<link href="http://scar.tw/article/2016/12/02/nfs-v4-easy-to-go/" />
		<id>urn:uuid:9729c864-9422-312b-f91a-83bff31570d9</id>
		<updated>2016-12-02T10:01:22+08:00</updated>
		<summary type="html"><![CDATA[<p>筆記文，紀錄可行的方式，一段時間沒有用有機會會忘記。</p>
<h2>Environment</h2>
<ul>
<li>Linux distribution: <code>Ubuntu</code> or <code>Debian</code></li>
<li>Server IP: <code>192.168.1.100</code></li>
<li>Client IP: <code>192.168.1.101</code></li>
</ul>
<!--more-->
<h2>Server Side</h2>
<h3>Install Package</h3>
<pre><code>sudo apt-get update
sudo apt-get install nfs-kernel-server nfs-common</code></pre>
<h3>修改 /etc/exports</h3>
<p>開放路徑給某個 Client IP 或是網段連接，後面是連結用的設定參數。</p>
<pre><code>/path/to/folder 192.168.1.101(rw,sync,no_subtree_check,all_squash,anonuid=1002,anongid=1002)</code></pre>
<h3>設定 iptables</h3>
<p>開放 UDP Port: <code>111</code>、<code>2049</code> 以及 <code>3000-65000</code>，IP 與上同。</p>
<pre><code>iptables -A INPUT -s 192.168.1.101 -p UDP -m multiport --dport 111,2049,30000:65000 -j ACCEPT</code></pre>
<h3>Restart Services</h3>
<pre><code>sudo service rpcbind
sudo service nfs-kernel-server
sudo service nfs-common</code></pre>
<h3>RPC Ports Check</h3>
<pre><code>sudo rpcinfo -p</code></pre>
<h2>Client Side</h2>
<pre><code>mount -t nfs4 192.168.1.100:/path/to/remote /path/to/local</code></pre>]]></summary>
	</entry>
	<entry>
		<title type="html"><![CDATA[Sony AS200V 防風對策]]></title>
		<link href="http://scar.tw/article/2016/03/03/sony-as200v-reduce-wind-noise/" />
		<id>urn:uuid:29d9fb7e-641e-202c-cb46-36df003323f6</id>
		<updated>2016-03-03T09:31:55+08:00</updated>
		<summary type="html"><![CDATA[<p>從去年開七月入手 AS200V 後，風切的問題就一直困擾我，有試過在機身的麥克風上加上海綿，但是收音的位置在前方會一直撞風，效果還是很差。</p>
<p>另外有看過網路上有人使用附贈的防水殼去改造，但使用上卻比不上裸機那樣方便，通常我會使用外部電源長時間錄影並且頻繁傳輸檔案，用防水殼就稍嫌礙事。</p>
<p>有想過外接麥克風，但是 AS200V 不像 X1000V 那樣將標準的雲台接孔做在機身上，需要另外使用轉接座才能連接安全帽支架，轉接座就會壓在防水蓋上擋住接麥克風的接孔，無法外接。</p>
<p><strong>BUT!!</strong></p>
<p>有天晚上靈感來了，將該買了材料買一買就開幹了！</p>
<!--more-->
<p>材料清單：</p>
<ul>
<li>3.5mm 插頭</li>
<li>3.5mm 插座</li>
<li>音響線材</li>
<li>領夾式麥克風</li>
<li>粉撲</li>
</ul>
<h2>機身改造</h2>
<p>將保護蓋打開並將機身上的螺絲轉下後就可以把保護蓋拆下了。</p>
<p>因為沒了蓋子所以要另外對線材接口用膠帶貼上做基本處理，只留下 MIC 的接口。</p>
<p>將蓋子去除後，機身跟雲台轉接座之間就騰出大約 2mm 的空間可以塞入線材。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/001.jpg" alt="AS200V Reduce Wind Noise" /></p>
<h2>製作轉接線材</h2>
<p>將電子材料的 3.5mm 接頭額外加工，將接點磨至 2mm 符合騰出的空間，就可以開始焊接了。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/002.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p>這邊要注意的是線材寬度也不能超過 2mm，另外因為接頭的接點都被磨薄了，所以接點跟接點間要特別防止短路的問題，我是另外用遮蓋膠帶去處理。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/003.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p><img src="/images/sony-as200v-reduce-wind-noise/004.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p>最後在另一端焊接上插孔並做絕緣處理就完成了。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/005.jpg" alt="AS200V Reduce Wind Noise" /></p>
<h2>組合</h2>
<p>這邊我選用的外接麥克風是 audio-technica 的 AT9902，因為它剛好可以夾在鼻罩上。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/006.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p>將該接的線接一接，把麥克風放在適合的位置，再將多餘的線塞到帽體內就完成了。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/007.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p><img src="/images/sony-as200v-reduce-wind-noise/008.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p><img src="/images/sony-as200v-reduce-wind-noise/009.jpg" alt="AS200V Reduce Wind Noise" /></p>
<h2>自製防風罩</h2>
<p>外接麥克風首次測試後差點沒吐血，因為是指向性麥克風在安全帽內同樣有風流通，所以風切聲依然嚴重。</p>
<p>最後決定去十元商店買了粉撲盒，將粉撲另外加工成防風罩裝在麥克風上，測試結果收音非常清晰，在比較高速的時候引擎聲也能錄到。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/010.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p><img src="/images/sony-as200v-reduce-wind-noise/011.jpg" alt="AS200V Reduce Wind Noise" /></p>
<h2>測試影片</h2>
<p>AS200V 內建麥克風</p>
<iframe src="https://www.youtube.com/embed/-snNlAPUZN0" width="560" height="315" frameborder="0" allowfullscreen></iframe>
<p>AS200V 內建麥克風 (加海綿)</p>
<iframe src="https://www.youtube.com/embed/HOaBnsi9Rp8" width="560" height="315" frameborder="0" allowfullscreen></iframe>
<p>AS200V + AT9902</p>
<iframe src="https://www.youtube.com/embed/EGXAc48it74" width="560" height="315" frameborder="0" allowfullscreen></iframe>
<p>AS200V + AT9902 (加防風罩)</p>
<iframe src="https://www.youtube.com/embed/gAJE67qSbIE" width="560" height="315" frameborder="0" allowfullscreen></iframe>]]></summary>
	</entry>
</feed>