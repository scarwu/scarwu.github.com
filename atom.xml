<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
	<title><![CDATA[ScarShow | 刀疤說]]></title>
	<subtitle>I know that I don't know</subtitle>
	<link href="http://scar.tw/atom.xml" rel="self" />
	<link href="http://scar.tw/" />
	<id>urn:uuid:4d418d05-9f8f-0741-8939-1476077aab63</id>
	<updated>2016-12-02T13:56:32+08:00</updated>
	<author>
		<name><![CDATA[ScarWu]]></name>
		<uri>http://scar.tw/</uri>
	</author>
	<entry>
		<title type="html"><![CDATA[MariaDB Galera Cluster 10.1 Setting]]></title>
		<link href="http://scar.tw/article/2016/12/02/mariadb-galera-cluster-10-1-setting/" />
		<id>urn:uuid:78046c09-e98e-0603-684a-d0a1a17dcc43</id>
		<updated>2016-12-02T12:02:07+08:00</updated>
		<summary type="html"><![CDATA[<p>先前已經寫過 <code>10.0</code> 的設定方式，MariaDB 升級成 <code>10.1</code> 後 <code>galera</code> 就已經內建在其中了，也不用額外安裝它的套件。</p>
<h2>Environment</h2>
<h3>Debian Jessie</h3>
<pre><code># MariaDB
sudo apt-get install python-software-properties
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db
sudo add-apt-repository 'deb http://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.0/debian jessie main'

# Percona XtraBackup
wget https://repo.percona.com/apt/percona-release_0.1-3.jessie_all.deb
sudo dpkg -i percona-release_0.1-3.jessie_all.deb
sudo apt-key adv --keyserver keys.gnupg.net --recv-keys 8507EFA5</code></pre>
<!--more-->
<h2>Install MariaDB &amp; XtraBackup</h2>
<p>這邊而外安裝 <code>XtraBackup</code> 是讓 <code>wsrep_sst_method</code> 參數可以使用 <code>xtrabackup-v2</code> 來同步 (一般是使用 <code>rsync</code>)，好處是不會鎖表</p>
<pre><code>sudo apt-get update
sudo apt-get install -y mariadb-server percona-xtrabackup</code></pre>
<h2>Upgrade MariaDB form 10.0 to 10.1 (Optional)</h2>
<p><code>10.0</code> 與 <code>10.1</code> 之間無法組成 clsuter，所以勢必要將 <code>10.0</code> 升級，出了安裝套件之外還要使用 <code>mysql_upgrade</code> 將原有的資料庫升級</p>
<pre><code>sudo apt-get update
sudo apt-get remove -y mariadb-galera-server
sduo apt-get install mariadb-server

# Upgrade old table
sudo mysql_upgrade -u root -p</code></pre>
<h2>Setting Cluster</h2>
<h3>Add Cluster User</h3>
<p>以下參數請自行帶入</p>
<ul>
<li><code>CLUSTER_USER</code></li>
<li><code>CLUSTER_PASS</code></li>
</ul>
<pre><code>GRANT USAGE ON *.* to CLUSTER_USER@'%' IDENTIFIED BY 'CLUSTER_PASS';
GRANT ALL PRIVILEGES on *.* to CLUSTER_USER@'%';</code></pre>
<h3>Modify /etc/mysql/conf.d/galera.cnf</h3>
<p>以下參數請自行帶入</p>
<ul>
<li><code>CLUSTER_NAME</code></li>
<li><code>OTHER_NODE_IP</code></li>
<li><code>NODE_IP</code></li>
<li><code>NODE_NAME</code></li>
<li><code>CLUSTER_USER</code></li>
<li><code>CLUSTER_PASS</code></li>
</ul>
<pre><code>[galera]
# Mandatory settings
wsrep_on                    = ON
wsrep_provider              = /usr/lib/galera/libgalera_smm.so
wsrep_provider_options      = "gcache.size=2G"
wsrep_cluster_name          = "CLUSTER_NAME"
wsrep_cluster_address       = "gcomm://OTHER_NODE_IP:4567?pc.wait_prim=no"
wsrep_node_address          = "NODE_IP"
wsrep_node_name             = NODE_NAME
wsrep_sst_auth              = CLUSTER_USER:CLUSTER_PASS
wsrep_sst_method            = xtrabackup-v2

bind-address                = 0.0.0.0
binlog_format               = ROW
query_cache_size            = 0
query_cache_type            = 0
default_storage_engine      = InnoDB

innodb_autoinc_lock_mode    = 2
innodb_log_file_size        = 48M
innodb_data_file_path       = ibdata1:12M:autoextend
innodb_buffer_pool_size     = 400M</code></pre>
<h3>Firewall allow ports</h3>
<ul>
<li>3306: MariaDB</li>
<li>4444: SST (RSync, XtraBackup)</li>
<li>4567: Galera Cluster</li>
<li>4568: IST</li>
</ul>
<h2>Start Cluster Node</h2>
<h3>Master Node</h3>
<pre><code>sudo service mysql bootstrap</code></pre>
<h3>Salve Node</h3>
<pre><code>sudo service msyql start</code></pre>]]></summary>
	</entry>
	<entry>
		<title type="html"><![CDATA[NFS v4 簡易安裝]]></title>
		<link href="http://scar.tw/article/2016/12/02/nfs-v4-easy-to-go/" />
		<id>urn:uuid:9729c864-9422-312b-f91a-83bff31570d9</id>
		<updated>2016-12-02T10:01:22+08:00</updated>
		<summary type="html"><![CDATA[<p>筆記文，紀錄可行的方式，一段時間沒有用有機會會忘記。</p>
<h2>Environment</h2>
<ul>
<li>Linux distribution: <code>Ubuntu</code> or <code>Debian</code></li>
<li>Server IP: <code>192.168.1.100</code></li>
<li>Client IP: <code>192.168.1.101</code></li>
</ul>
<!--more-->
<h2>Server Side</h2>
<h3>Install Package</h3>
<pre><code>sudo apt-get update
sudo apt-get install nfs-kernel-server nfs-common</code></pre>
<h3>修改 /etc/exports</h3>
<p>開放路徑給某個 Client IP 或是網段連接，後面是連結用的設定參數。</p>
<pre><code>/path/to/folder 192.168.1.101(rw,sync,no_subtree_check,all_squash,anonuid=1002,anongid=1002)</code></pre>
<h3>設定 iptables</h3>
<p>開放 UDP Port: <code>111</code>、<code>2049</code> 以及 <code>3000-65000</code>，IP 與上同。</p>
<pre><code>iptables -A INPUT -s 192.168.1.101 -p UDP -m multiport --dport 111,2049,30000:65000 -j ACCEPT</code></pre>
<h3>Restart Services</h3>
<pre><code>sudo service nfs-kernel-server
sudo service nfs-common</code></pre>
<h2>Client Side</h2>
<pre><code>mount -t nfs4 192.168.1.100:/path/to/remote /path/to/local</code></pre>]]></summary>
	</entry>
	<entry>
		<title type="html"><![CDATA[Sony AS200V 防風對策]]></title>
		<link href="http://scar.tw/article/2016/03/03/sony-as200v-reduce-wind-noise/" />
		<id>urn:uuid:29d9fb7e-641e-202c-cb46-36df003323f6</id>
		<updated>2016-03-03T09:31:55+08:00</updated>
		<summary type="html"><![CDATA[<p>從去年開七月入手 AS200V 後，風切的問題就一直困擾我，有試過在機身的麥克風上加上海綿，但是收音的位置在前方會一直撞風，效果還是很差。</p>
<p>另外有看過網路上有人使用附贈的防水殼去改造，但使用上卻比不上裸機那樣方便，通常我會使用外部電源長時間錄影並且頻繁傳輸檔案，用防水殼就稍嫌礙事。</p>
<p>有想過外接麥克風，但是 AS200V 不像 X1000V 那樣將標準的雲台接孔做在機身上，需要另外使用轉接座才能連接安全帽支架，轉接座就會壓在防水蓋上擋住接麥克風的接孔，無法外接。</p>
<p><strong>BUT!!</strong></p>
<p>有天晚上靈感來了，將該買了材料買一買就開幹了！</p>
<!--more-->
<p>材料清單：</p>
<ul>
<li>3.5mm 插頭</li>
<li>3.5mm 插座</li>
<li>音響線材</li>
<li>領夾式麥克風</li>
<li>粉撲</li>
</ul>
<h2>機身改造</h2>
<p>將保護蓋打開並將機身上的螺絲轉下後就可以把保護蓋拆下了。</p>
<p>因為沒了蓋子所以要另外對線材接口用膠帶貼上做基本處理，只留下 MIC 的接口。</p>
<p>將蓋子去除後，機身跟雲台轉接座之間就騰出大約 2mm 的空間可以塞入線材。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/001.jpg" alt="AS200V Reduce Wind Noise" /></p>
<h2>製作轉接線材</h2>
<p>將電子材料的 3.5mm 接頭額外加工，將接點磨至 2mm 符合騰出的空間，就可以開始焊接了。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/002.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p>這邊要注意的是線材寬度也不能超過 2mm，另外因為接頭的接點都被磨薄了，所以接點跟接點間要特別防止短路的問題，我是另外用遮蓋膠帶去處理。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/003.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p><img src="/images/sony-as200v-reduce-wind-noise/004.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p>最後在另一端焊接上插孔並做絕緣處理就完成了。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/005.jpg" alt="AS200V Reduce Wind Noise" /></p>
<h2>組合</h2>
<p>這邊我選用的外接麥克風是 audio-technica 的 AT9902，因為它剛好可以夾在鼻罩上。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/006.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p>將該接的線接一接，把麥克風放在適合的位置，再將多餘的線塞到帽體內就完成了。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/007.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p><img src="/images/sony-as200v-reduce-wind-noise/008.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p><img src="/images/sony-as200v-reduce-wind-noise/009.jpg" alt="AS200V Reduce Wind Noise" /></p>
<h2>自製防風罩</h2>
<p>外接麥克風首次測試後差點沒吐血，因為是指向性麥克風在安全帽內同樣有風流通，所以風切聲依然嚴重。</p>
<p>最後決定去十元商店買了粉撲盒，將粉撲另外加工成防風罩裝在麥克風上，測試結果收音非常清晰，在比較高速的時候引擎聲也能錄到。</p>
<p><img src="/images/sony-as200v-reduce-wind-noise/010.jpg" alt="AS200V Reduce Wind Noise" /></p>
<p><img src="/images/sony-as200v-reduce-wind-noise/011.jpg" alt="AS200V Reduce Wind Noise" /></p>
<h2>測試影片</h2>
<p>AS200V 內建麥克風</p>
<iframe src="https://www.youtube.com/embed/-snNlAPUZN0" width="560" height="315" frameborder="0" allowfullscreen></iframe>
<p>AS200V 內建麥克風 (加海綿)</p>
<iframe src="https://www.youtube.com/embed/HOaBnsi9Rp8" width="560" height="315" frameborder="0" allowfullscreen></iframe>
<p>AS200V + AT9902</p>
<iframe src="https://www.youtube.com/embed/EGXAc48it74" width="560" height="315" frameborder="0" allowfullscreen></iframe>
<p>AS200V + AT9902 (加防風罩)</p>
<iframe src="https://www.youtube.com/embed/gAJE67qSbIE" width="560" height="315" frameborder="0" allowfullscreen></iframe>]]></summary>
	</entry>
	<entry>
		<title type="html"><![CDATA[MariaDB Galera Cluster 10.0 Setting]]></title>
		<link href="http://scar.tw/article/2015/03/11/mariadb-galera-cluster-10-0-setting/" />
		<id>urn:uuid:2368b3d3-8d8d-18e9-153a-888f8d3d01f5</id>
		<updated>2015-03-11T12:37:00+08:00</updated>
		<summary type="html"><![CDATA[<h2>Setting Environment</h2>
<h3>Repository</h3>
<h4>Ubuntu Trusty</h4>
<pre><code class="language-bash">sudo apt-get install software-properties-common
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db
sudo add-apt-repository 'deb http://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.0/ubuntu trusty main'</code></pre>
<h4>Debian Wheezy</h4>
<pre><code class="language-bash">sudo apt-get install python-software-properties
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db
sudo add-apt-repository 'deb http://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.0/debian wheezy main'</code></pre>
<!--more-->
<h3>Install MariaDB Galera Cluster</h3>
<pre><code class="language-bash">sudo apt-get update &amp;&amp; sudo apt-get upgrade
sudo apt-get install mariadb-galera-server galera rsync</code></pre>
<h2>Setting Cluster Node</h2>
<h3>Create Cluster User for All Node</h3>
<pre><code class="language-sql">GRANT USAGE ON *.* to CLUSTER_USER@'%' IDENTIFIED BY 'CLUSTER_PASS';
GRANT ALL PRIVILEGES on *.* to CLUSTER_USER@'%';
GRANT USAGE ON *.* to CLUSTER_USER@'localhost' IDENTIFIED BY 'CLUSTER_PASS';
GRANT ALL PRIVILEGES on *.* to CLUSTER_USER@'localhost';</code></pre>
<h3>Stop All Cluster Node</h3>
<pre><code class="language-bash">sudo service mysql stop</code></pre>
<h3>Setting MaraiDB Cluster</h3>
<pre><code class="language-ini">[mysqld]
# Mysql Settings
binlog_format = ROW
default-storage-engine = innodb
innodb_autoinc_lock_mode = 2
query_cache_size = 0
query_cache_type = 0
bind-address = 0.0.0.0

# Galera Settings
wsrep_node_address = "NODE_IP"
wsrep_provider = /usr/lib/galera/libgalera_smm.so
wsrep_cluster_name = "CLUSTER_NAME"
wsrep_cluster_address = "gcomm://OTHER_NODE_IP:4567"
wsrep_sst_auth = CLUSTER_USER:CLUSTER_PASS
wsrep_sst_method = rsync</code></pre>
<h3>Open 3 Ports in Firewall</h3>
<ul>
<li>3306: MariaDB</li>
<li>4444: RSync</li>
<li>4567: Galera Cluster</li>
</ul>
<h3>Start Cluster Node</h3>
<h4>First Cluster Node</h4>
<pre><code class="language-bash">sudo service mysql start --wsrep-new-cluster</code></pre>
<h4>Other Cluster Node</h4>
<pre><code class="language-bash">sudo service mysql start</code></pre>
<h3>Fix Bug</h3>
<p>If you shutdown cluster node with failed, then copy <code>/etc/mysql/debian.cnf</code> from the first node to the other node.</p>
<pre><code class="language-bash">sudo service mysql stop
[FAIL] Stopping MariaDB database server: mysqld failed!</code></pre>
<h2>Finally</h2>
<p>Have Fun!</p>]]></summary>
	</entry>
	<entry>
		<title type="html"><![CDATA[Polaroid Cube 開箱與四驅車實拍]]></title>
		<link href="http://scar.tw/article/2015/01/11/polaroid-cube-unboxing-and-mini4wd/" />
		<id>urn:uuid:3bbbdcb6-9f30-c9b6-916c-36cf262eb0eb</id>
		<updated>2015-01-11T02:57:05+08:00</updated>
		<summary type="html"><![CDATA[<p>其實這一篇是遲來的開箱文，事實上我已經入手 <code>Polaroid Cube</code> 一段時間了，去年九月的時候就跟朋友一起在國外預購了，大約兩個月後送達，我買了攝影機本體之外還多買了一個攝影腳架的雲台，朋友則是買防水殼，就我的部份折合台幣外加運費大約是 <code>3.8k</code> 台幣，比現在在台灣上市的價格要便宜，事實上在台灣買比較貴的原因出在配件貴滿多的，而本體價格其實沒差多少。</p>
<p>當初買這個攝影機其實是我想將它安裝在四驅車上，讓它用第一人稱去錄跑道的實況，另外就是它很小放在四驅車上真的很剛好，並不會像 <code>GoPro</code> 旁邊會凸出來或是像行車記錄器那樣過長。</p>
<!--more-->
<h2>實體</h2>
<p>包裝很簡單，就一個透明盒子裝著，而下方則是吸附在金屬板上，沒錯在本體的下方有磁鐵可以任意吸附在金屬表面。</p>
<p><img src="/images/polaroid-cube-and-mini4wd/001.jpg" alt="Polaroid Cube" /></p>
<p><img src="/images/polaroid-cube-and-mini4wd/002.jpg" alt="Polaroid Cube" /></p>
<p>將 <code>Polaroid Cube</code> 放上腳架整個就很小巧，另外他底座是可以拆卸的且可以跟其他配件互通，不過卻很不好拆卸。</p>
<p><img src="/images/polaroid-cube-and-mini4wd/003.jpg" alt="Polaroid Cube" /></p>
<p><img src="/images/polaroid-cube-and-mini4wd/004.jpg" alt="Polaroid Cube" /></p>
<h2>四驅車</h2>
<p>我特別製作了一個車殼可以讓它安裝在上面，下面的金屬板是包裝盒中的一部分，我把它拿來加工，擴孔並導腳讓它可以使用皿型螺絲使底部貼合。</p>
<p><img src="/images/polaroid-cube-and-mini4wd/005.jpg" alt="Polaroid Cube" /></p>
<p>另外為了造型另外將軟殼切了個洞讓 <code>Polaroid Cube</code> 可以穿過去，附帶一提的是因為它本身有廣角所以不會有車殼過高擋住畫面的問題，車殼只會出現在畫面的下方一點的位置。</p>
<p><img src="/images/polaroid-cube-and-mini4wd/006.jpg" alt="Polaroid Cube" /></p>
<h2>實際拍攝</h2>
<p>在我的播放清單中還有其它的影片這邊就先放上一段，因為是用四驅車的視角所以看起來車速會特別的快，如有感覺噁心想吐就多看幾次就會好了。</p>
<iframe width="560" height="315" src="//www.youtube.com/embed/3g-2XQ0g1l8" frameborder="0" allowfullscreen></iframe>
<h2>感謝</h2>
<p>最後在這邊特別感謝新竹快樂堂熱血車友 <a href="https://www.facebook.com/adzg9900">阿臣</a> 贊助了我一盒 <code>ITEM 18613</code>以及一堆零件讓我弄好了這台車。</p>]]></summary>
	</entry>
</feed>